let express,getDB,getTwitterCount,getInstagramCount;_bde‍.w("express",[["default",["express"],function(v){express=v}]]);_bde‍.w("./lib/db",[["getDB",["getDB"],function(v){getDB=v}]]);_bde‍.w("./lib/scraper",[["getTwitterCount",["getTwitterCount"],function(v){getTwitterCount=v}],["getInstagramCount",["getInstagramCount"],function(v){getInstagramCount=v}]]);



const app = express();
app.get('/scrape', async (req, res) => {
  const db = await getDB();
  _bde‍.g.console.log(db);
  console.log('Scraping');
  const [iCount, tCount] = await Promise.all([
    getInstagramCount(),
    getTwitterCount(),
  ]);
  const getTwitter = await db.get('twitter');
  getTwitter
    .push({
      date: Date.now(),
      count: tCount,
    })
    .write();

  res.json({ iCount, tCount });
});
app.listen(3333, () => {
  console.log(`App is running`);
});
